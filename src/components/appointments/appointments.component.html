<p-toast />

<p-table
  [value]="appointments"
  dataKey="id"
  [paginator]="true"
  [totalRecords]="appointments.length"
  [rows]="5"
>
  <ng-template #caption>
    <div class="flex justify-content-end mb-2">
      <p-button
        label="Adauga programare"
        icon="pi pi-calendar-plus"
        (onClick)="addAppointment()"
      />
    </div>
  </ng-template>

  <ng-template #header>
    <tr>
      <th>Client</th>
      <th>Masina</th>
      <th>Data</th>
      <th>Ora</th>
      <th>Mod contact</th>
      <th>Status programare</th>
      <th>Actiuni</th>
    </tr>
  </ng-template>

  <ng-template #body let-appointment>
    <tr>
      <td>
        {{ appointment.client.firstName }} {{ appointment.client.lastName }}
      </td>
      <td>{{ appointment.car.licensePlate }}</td>
      <td>{{ appointment.date }}</td>
      <td>{{ appointment.startTime }} - {{ appointment.endTime }}</td>
      <td>{{ appointment.method }}</td>
      <td>{{ appointment.status }}</td>
      <td>
        @if (appointment.status === appointmentStatusEnum.Finalized) {
        <p-button icon="pi pi-times" class="mr-2" (click)="cancel(appointment)"/>
        @if (isAdmin) {
          <p-button icon="pi pi-pencil" class="mr-2" (click)="editAppointment(appointment)" />
          <p-button icon="pi pi-check" class="mr-2" (click)="finalize(appointment)"/>
          <p-button icon="pi pi-history" (onClick)="finalizeWithHistory(appointment)" label="Finalizeaza cu istoric"/>
        } }
      </td>
    </tr>
  </ng-template>

  <ng-template #emptymessage>
    <tr>
      <td colspan="7" class="text-center">Nu exista programari</td>
    </tr>
  </ng-template>
</p-table>
